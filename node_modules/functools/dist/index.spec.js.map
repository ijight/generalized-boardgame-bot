{"version":3,"file":"index.spec.js","sourceRoot":"","sources":["../src/index.spec.ts"],"names":[],"mappings":"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","sourcesContent":["import * as functools from \"./index\";\n\ndescribe(\"functools\", () => {\n  describe(\"identity\", () => {\n    it(\"should return the input\", () => {\n      expect(functools.identity(42)).toEqual(42);\n    });\n  });\n\n  describe(\"always\", () => {\n    it(\"should return a function that returns the input\", () => {\n      const fn = functools.always(42);\n\n      expect(fn()).toEqual(42);\n    });\n  });\n\n  describe(\"memoize\", () => {\n    it(\"should cache return values by input argument\", () => {\n      let i = 0;\n      const fn = functools.memoize(() => ++i);\n\n      expect(fn(\"foo\")).toEqual(1);\n      expect(fn(\"foo\")).toEqual(1);\n      expect(fn(\"bar\")).toEqual(2);\n      expect(fn(\"bar\")).toEqual(2);\n    });\n  });\n\n  describe(\"memoize0\", () => {\n    it(\"should memoize a zero-length function\", () => {\n      let i = 0;\n      const fn = functools.memoize0(() => ++i);\n\n      expect(fn()).toEqual(1);\n      expect(fn()).toEqual(1);\n    });\n  });\n\n  describe(\"memoizeOne\", () => {\n    it(\"should memoize a zero-length function\", () => {\n      let i = 0;\n      const fn = functools.memoizeOne((x: string) => ++i);\n\n      expect(fn(\"foo\")).toEqual(1);\n      expect(fn(\"foo\")).toEqual(1);\n\n      expect(fn(\"bar\")).toEqual(2);\n      expect(fn(\"bar\")).toEqual(2);\n\n      expect(fn(\"foo\")).toEqual(3);\n      expect(fn(\"foo\")).toEqual(3);\n    });\n  });\n\n  describe(\"prop\", () => {\n    const getter = functools.prop(\"foo\");\n\n    expect(getter({ foo: 123 })).toEqual(123);\n    expect(getter({})).toEqual(undefined);\n  });\n\n  describe(\"invoke\", () => {\n    expect(functools.invoke(\"foo\")({ foo: () => 123 })).toEqual(123);\n    expect(functools.invoke(\"add\", 3, 7)({ add: (a, b) => a + b })).toEqual(10);\n  });\n\n  describe(\"throttle\", () => {\n    it(\"should throttle function calls\", done => {\n      let i = 0;\n      const fn = functools.throttle(() => ++i, 100);\n\n      fn(); // Leading invoke.\n      expect(i).toEqual(1);\n\n      setTimeout(() => {\n        fn(); // Doesn't invoke.\n        expect(i).toEqual(1);\n      }, 10);\n\n      setTimeout(() => {\n        fn(); // Works after timeout.\n        expect(i).toEqual(2);\n        return done();\n      }, 100);\n    });\n\n    it(\"should throttle function calls without leading call\", done => {\n      let i = 0;\n      const fn = functools.throttle(() => ++i, 100, { leading: false });\n\n      fn(); // Leading invoke disabled.\n      expect(i).toEqual(0);\n\n      setTimeout(() => fn(), 50); // Noop.\n\n      setTimeout(() => {\n        expect(i).toEqual(1);\n        return done();\n      }, 110);\n    });\n\n    it(\"should flush the function call\", done => {\n      let i = 0;\n      const fn = functools.throttle(() => ++i, 100);\n\n      fn.flush(); // Nothing to execute.\n\n      expect(i).toEqual(0);\n\n      fn(); // Execute leading `fn`.\n      fn(); // Pending `fn`.\n      expect(i).toEqual(1);\n\n      fn.flush(); // Flush pending `fn`.\n      expect(i).toEqual(2);\n\n      fn.flush(); // Does nothing, no pending `fn`.\n      expect(i).toEqual(2);\n\n      fn(); // Enqueue `fn` after last flush.\n      expect(i).toEqual(3);\n\n      setTimeout(() => {\n        expect(i).toEqual(3);\n        return done();\n      }, 100);\n    });\n\n    it(\"should skip trailing calls\", done => {\n      let i = 0;\n      const fn = functools.throttle(() => ++i, 100, {\n        trailing: false\n      });\n\n      fn();\n\n      expect(i).toEqual(1);\n\n      // Tracks `pending` for first \"event loop\".\n      setTimeout(() => fn(), 20);\n      setTimeout(() => fn(), 40);\n      setTimeout(() => fn(), 60);\n      setTimeout(() => fn(), 80);\n\n      // Nothing happened between loops with `lagging` set.\n      setTimeout(() => expect(i).toEqual(1), 150);\n\n      setTimeout(() => {\n        expect(i).toEqual(1); // Executed the second timeout.\n        return done();\n      }, 210);\n    });\n\n    it(\"should debounce function execution\", done => {\n      let i = 0;\n      const fn = functools.throttle(() => ++i, 100, {\n        leading: false,\n        debounce: true\n      });\n\n      fn();\n\n      expect(i).toEqual(0);\n\n      // Tracks `pending` for first \"event loop\".\n      setTimeout(() => fn(), 20);\n      setTimeout(() => fn(), 40);\n      setTimeout(() => fn(), 60);\n      setTimeout(() => fn(), 80);\n\n      // Nothing happened between loops with `debounce` set.\n      setTimeout(() => expect(i).toEqual(0), 130);\n\n      setTimeout(() => {\n        expect(i).toEqual(1); // Executed after debounce.\n        return done();\n      }, 190);\n    });\n  });\n\n  describe(\"spread\", () => {\n    it(\"should spread function arguments\", () => {\n      const fn = functools.spread(functools.add);\n\n      expect(fn([1, 2])).toEqual(3);\n    });\n  });\n\n  describe(\"compose\", () => {\n    it(\"should compose a list of functions\", () => {\n      const fn = functools.compose(\n        functools.partial(functools.multiply, 5),\n        functools.partial(functools.flip(functools.subtract), 3)\n      );\n\n      expect(fn(10)).toEqual(35);\n    });\n  });\n\n  describe(\"sequence\", () => {\n    it(\"should sequence a list of functions\", () => {\n      const fn = functools.sequence(\n        functools.partial(functools.flip(functools.divide), 5),\n        functools.partial(functools.add, 3)\n      );\n\n      expect(fn(10)).toEqual(5);\n    });\n  });\n\n  describe(\"nary\", () => {\n    it(\"should restrict function arity\", () => {\n      const fn = functools.nary(1, parseInt);\n\n      expect([\"1\", \"2\", \"3\"].map(fn)).toEqual([1, 2, 3]);\n    });\n  });\n});\n"]}